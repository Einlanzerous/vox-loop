# Dendrite configuration â€” generated by vox-loop init
version: 2

global:
  server_name: {{ .ServerName }}
  private_key: matrix_key.pem
  key_validity_period: 168h0m0s

  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable
    max_open_conns: 90
    max_idle_conns: 5
    conn_max_lifetime: -1

  cache:
    max_size_estimated: 1gb
    max_age: 1h

  jetstream:
    storage_path: /var/dendrite/jetstream
    in_memory: false

  metrics:
    enabled: false

logging:
  - type: std
    level: info

app_service_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

client_api:
  registration_disabled: true
  registration_shared_secret: "{{ .SharedSecret }}"

federation_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

key_server:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

media_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable
  base_path: /var/dendrite/media
  max_file_size_bytes: 104857600

mscs:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

relay_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

room_server:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

sync_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable

user_api:
  database:
    connection_string: postgres://{{ .PostgresUser }}:{{ .PostgresPassword }}@{{ .PostgresHost }}:5432/{{ .PostgresDB }}?sslmode=disable
